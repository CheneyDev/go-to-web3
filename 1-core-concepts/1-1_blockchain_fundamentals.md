# 1.1: 区块链基础知识

本文档将详细介绍进入 Web3 世界所需了解的基础核心概念。

---

## 1. 去中心化的核心理念

在谈论区块链之前，我们必须先理解"去中心化"（Decentralization），因为它是整个 Web3 世界的基石。

-   **Web2：中心化模式**
    我们目前熟悉的互联网（Web2）是高度中心化的。数据和权力集中在少数几家巨头公司（如 Google, Meta, Amazon）的服务器中。这种模式高效、易于管理，但也带来了单点故障、数据审查、隐私泄露和平台滥用权力的风险。你发布在社交媒体上的内容，理论上随时可能被平台删除。

-   **Web3：去中心化模式**
    去中心化旨在将权力和控制从单一实体手中分散出去，交还给网络中的所有参与者。在一个去中心化的网络中：
    -   **没有中心服务器**：数据分布存储在网络中的多个节点（参与者的计算机）上。
    -   **抗审查**：没有单一实体可以轻易地删除或修改数据。
    -   **信任最小化**：参与者之间不需要相互信任，他们只需要信任系统底层的代码和数学（即共识协议）。

去中心化是区块链实现其核心价值（如透明、无需许可、抗审查）的前提。

## 2. 区块链的数据结构

区块链本质上是一个**分布式、不可篡改的账本**。它的名字完美地描述了其数据结构：一个由"区块"（Block）通过密码学技术链接起来的"链"（Chain）。

-   **区块 (Block)**：
    一个区块就像账本上的一页，它主要包含三部分内容：
    1.  **数据 (Data)**：例如，比特币区块中包含的是一笔笔的交易记录。
    2.  **哈希 (Hash)**：当前区块的"指纹"。它是一个通过哈希算法（如 SHA-256）根据区块内所有内容计算出的、独一无二的字符串。**任何对区块内容的微小改动都会导致其哈希值发生巨大变化。**
    3.  **前一个区块的哈希 (Previous Hash)**：这是实现"链接"的关键。每个区块都包含了前一个区块的哈希值。

-   **链 (Chain)**：
    这种"下一个区块包含上一个区块哈希"的结构，像链条一样将所有区块按时间顺序串联起来，形成了区块链。第一个区块被称为**创世区块 (Genesis Block)**，因为它没有前一个区块。

    ```mermaid
    graph TD
        A[创世区块<br/>Prev Hash: 0000...<br/>Hash: 8A2B] --> B[区块 #1<br/>Prev Hash: 8A2B<br/>Hash: C3D4];
        B --> C[区块 #2<br/>Prev Hash: C3D4<br/>Hash: E5F6];
        C --> D[...];
    ```

## 3. 不可篡改性的原理 (Immutability)

区块链的不可篡改性是其最强大的特性之一，它源于**哈希指针链**和**分布式网络**的结合。

-   **篡改的难度**：
    假设一个攻击者想要修改**区块 #1**中的一笔交易。
    1.  由于数据被修改，**区块 #1 的哈希**会立刻改变。
    2.  因为区块 #1 的哈希变了，而**区块 #2**中存储的"前一个区块哈希"还是旧的，这就会导致链条在区块 #1 和 #2 之间"断裂"。
    3.  为了让链条重新有效，攻击者必须用新的哈希重新计算**区块 #2**。
    4.  这会进一步改变区块 #2 的哈希，迫使攻击者继续重新计算**区块 #3**，以此类推，直到最后一个区块。

-   **共识机制的保护**：
    在像比特币这样的公有链中，仅仅重新计算整条链还不够。因为网络是分布式的，攻击者需要让网络中的大多数节点（通常是 51%）都接受他篡改过的新链，这需要巨大的算力（即工作量证明），在实践中几乎是不可能完成的任务。

## 4. 共识机制 (Consensus Mechanisms)

既然网络是去中心化的，那么由谁来决定下一个区块是什么、并且保证所有节点上的账本都一致呢？这就是**共识机制**的作用。

-   **工作量证明 (Proof of Work, PoW)**
    -   **核心思想**：通过竞争解决一个复杂的数学难题来争取记账权。谁先解决难题，谁就能创建下一个区块并获得奖励（如新的比特币）。
    -   **如何工作**：这个"数学难题"实际上是找到一个特定的数字（称为 Nonce），当这个 Nonce 与区块数据结合后，计算出的哈希值必须小于一个目标值（即哈希值以特定数量的 0 开头）。这个过程没有捷径，只能通过海量的尝试（即"工作"）来完成。
    -   **优点**：非常安全，经过了长时间的检验（比特币是最好的例子）。
    -   **缺点**：能源消耗巨大，处理交易的速度（TPS）较慢。
    -   **代表**：Bitcoin。

    **什么是"挖矿" (Mining)?**

    "挖矿"是 PoW 机制中形象的比喻。这个过程就是矿工（Miners）利用专门的硬件（如 ASIC 芯片）进行大量哈希运算，以求成为第一个找到有效 Nonce 的人。
    - **过程**: 矿工将待确认的交易打包成一个候选区块，然后不断地尝试不同的 Nonce 值，对整个区块内容进行哈希计算。
    - **目标**: 计算出的哈希值必须小于网络设定的目标值。
    - **奖励**: 第一个成功的矿工将向全网广播他的区块，其他节点验证通过后，会将该区块链接到主链上。作为回报，该矿工会获得两部分奖励：
        1.  **区块奖励 (Block Reward)**：凭空创造出来的、全新的代币（例如，新的比特币）。这是代币发行的主要方式。
        2.  **交易费 (Transaction Fees)**：该区块内所有交易所包含的手续费。
    
    这个过程不仅保证了新区块的安全创建，也完成了新币的发行，因此被称为"挖矿"。

-   **权益证明 (Proof of Stake, PoS)**
    -   **核心思想**：记账权不再通过算力竞争获得，而是通过质押（Stake）网络的原生代币来获得。你质押的代币越多、时间越长，被选中创建下一个区块的概率就越大。
    -   **如何工作**：系统根据一套算法（结合质押量、质押时间等因素）随机选择一个验证者（Validator）来提议新的区块。如果验证者作恶（例如提议一个无效区块），他们质押的代币将被罚没（Slashing），这构成了作恶的巨大成本。
    -   **优点**：非常节能，TPS 相对更高。
    -   **缺点**：可能导致"富者愈富"的中心化趋势；安全性理论相比 PoW 略显复杂。
    -   **代表**：Ethereum (已从 PoW 转换到 PoS), Cardano, Solana。

## 5. 比特币与以太坊：从数字黄金到世界计算机

理解比特币和以太坊的关系，是理解 Web3 演进的关键。

-   **比特币：数字黄金与去中心化支付网络**
    比特币是第一个成功的区块链应用，由中本聪在 2008 年提出。它的核心目标是创建一个**点对点的电子现金系统**，不依赖于任何金融机构。
    -   **定位**: 数字黄金。它因其稀缺性（总量 2100 万）、安全性和去中心化特性，被视为一种价值存储手段。
    -   **技术特点**: 使用 UTXO 模型，脚本语言功能有限，主要用于实现简单的支付逻辑。

-   **以太坊：可编程的"世界计算机"**
    以太坊由 Vitalik Buterin 在 2013 年提出，他认为比特币和区块链技术不应仅限于货币。以太坊在比特币的基础上进行了关键的创新：
    -   **核心创新**: 引入了**智能合约 (Smart Contracts)** 和**以太坊虚拟机 (EVM)**。这使得开发者可以在以太坊区块链上构建和部署任意复杂的去中心化应用 (DApps)。
    -   **定位**: 世界计算机。以太坊的目标是成为一个全球性的、去中心化的计算平台，而不仅仅是一个支付网络。
    -   **技术特点**: 使用账户模型（更像银行账户），拥有图灵完备的编程语言（Solidity），可以处理远比比特币复杂的逻辑。

**总结：从"专一的账本"到"通用的平台"**

比特币的设计哲学是"做一件事，并把它做到极致"。它是一个高度安全、专为价值转移而设计的**去中心化账本**。其脚本语言能力有限，是为了保证网络的高度稳定和安全。

以太坊则在此基础上迈出了一大步，其目标是成为一个**去中心化的应用平台**。通过引入图灵完备的智能合约，以太坊允许开发者构建和运行任意复杂的应用程序。

因此，比特币向世界证明了**去中心化货币**是可行的，而以太坊则证明了**去中心化应用**是可行的，为我们今天看到的 DeFi、NFT 等丰富的 Web3 生态打开了大门。 